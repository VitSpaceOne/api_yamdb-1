# api_yamdb
> Проект содержит три приложения: reviews, api, users. Приложение reviews содержит модели сервиса, приложение api предоставляет доступ к моделям через API, а в приложениии users реализована вся логика для управления ролями и выдачи доступов: пермишены, эндпоинты для регистрации и получения токена. Подробное описание запросов доступно по адресу /redoc/

## Локальное развертывание приложения
Создать и активировать виртуальное окружение.
В виртуальном окружении, в директории /api_yamdb/api_yamdb/ выполнить команды:
```
pip install -r requirements.txt
python manage.py migrate
python manage.py runserver
```

## Приложение users
В приложении реализована расширенная модель пользователя, права для управления доступами до основных эндпоинтов и API для управления пользователями.

### Роли
- Аноним — может просматривать описания произведений, читать отзывы и комментарии.
- Аутентифицированный пользователь (user) — может, как и Аноним, читать всё, дополнительно он может публиковать отзывы и ставить оценку произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать и удалять свои отзывы и комментарии. Эта роль присваивается по умолчанию каждому новому пользователю.
- Модератор (moderator) — те же права, что и у Аутентифицированного пользователя плюс право удалять любые отзывы и комментарии.
- Администратор (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
- Суперюзер Django — обладет правами администратора (admin)

### Эндпоинты

- /auth/singup/ — регистрация нового пользователя
- /auth/token/ — получение токена

Алгоритм регистрации пользователя устроен следующим образом:
1. Пользователь отправляет username и email с помощью POST-запроса.
2. Стандартным генератором Django PasswordResetTokenGenerator генерируется токен, который отправляется на почту пользователя. Этот токен нужен для получения JWT-токена, с которым пользователь будет обращаться к основным эндпоинтам сервиса.
3. Пользователь отправляет username и токен в поле confirmation_code с помощью POST-запроса и получает в ответе JWT-токен, если данные валидны.

- /users/ — коллекция пользователей, обрабатывает все запросы кроме PUT
- /users/me/ — эндпоинт для получения и изменения данных о самом себе



